(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"4cbe":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"cont"},[i("v-uni-text",[e._v("为了更好的体验")]),i("br"),e._v("微信一键登录,更方便,更安全")],1),i("v-uni-button",{directives:[{name:"show",rawName:"v-show",value:e.can_login,expression:"can_login"}],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getWeChatCode.apply(void 0,arguments)}}},[e._v("微信登录")])],1)},a=[]},"4dc1":function(e,t,i){var n=i("7579");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("af41d8de",n,!0,{sourceMap:!1,shadowMode:!1})},7579:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,"uni-view[data-v-14b5f881]{height:90vh}.cont[data-v-14b5f881]{width:100%;text-align:center;margin-top:12%;font-size:1.3rem}uni-button[data-v-14b5f881]{width:%?600?%;border-radius:%?300?%;background-color:#3ecc61;color:#fff;font-weight:500;margin-top:-80%;top:-30vh}",""]),e.exports=t},9742:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("5c47"),i("a1c1"),i("23f4"),i("7d2f"),i("9c4e"),i("ab80"),i("c223");var n={data:function(){return{can_login:!1,parent_id:0,ikey:"",appid:"",d_domain:""}},onLoad:function(e){},onShow:function(){var e=this;this.ikey=localStorage.getItem("ikey"),this.ikey||(this.ikey=this.getUrlCode("ikey"),localStorage.setItem("ikey",this.ikey));var t=this.getUrlCode("type")?this.getUrlCode("type"):"";uni.setStorageSync("type",t);var i=this.getUrlCode("data");if(i){var n=this.base_config.api_url;uni.request({url:n+"/api/index/decrypt",method:"POST",data:{url:location.href},success:function(t){e.can_login=!0,e.appid=t.data.data.appid,e.d_domain=t.data.data.d_domain,t.data.data.admin_id&&""!=t.data.data.admin_id&&uni.setStorageSync("admin_id",t.data.data.admin_id),t.data.data.parent_id&&""!=t.data.data.parent_id&&uni.setStorageSync("parent_id",t.data.data.parent_id),e.user_id=uni.getStorageSync("user_id"),e.user_id&&e.checkUser()}})}else{var a=this.getUrlCode("admin_id");""!==a&&null!==a&&uni.setStorageSync("admin_id",a);var o=this.getUrlCode("parent_id");""!==o&&null!==o&&uni.setStorageSync("parent_id",o),this.getLoginConfig(),this.user_id=uni.getStorageSync("user_id"),this.user_id&&this.checkUser()}},methods:{checkUser:function(){var e=this,t=this.base_config.api_url;uni.request({url:t+"/api/index/checkUser",method:"GET",data:{user_id:this.user_id},success:function(t){if(1==t.data.code)if(1==t.data.data){uni.clearStorageSync();var i=e.getUrlCode("parent_id");""!==i&&null!==i&&localStorage.setItem("parent_id",i),uni.reLaunch({url:"/pages/login/login"})}else uni.reLaunch({url:"/pages/index/index"})}})},getLoginConfig:function(){var e=this,t=this.base_config.api_url;uni.request({url:t+"/api/index/getLoginConfig",method:"GET",success:function(t){console.log(t),1==t.data.code?(e.can_login=!0,e.appid=t.data.data.appid,e.d_domain=t.data.data.d_domain):alert("请求配置失败")}})},checkWeChatCode:function(){var e=this.getUrlCode("code"),t=this.getUrlCode("http");this.getUrlCode("admin_id"),this.getUrlCode("parent_id");console.log(22,e,t,encodeURIComponent(location.href)),e&&alert(e)},getUrlCode:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},getWeChatCode:function(){uni.setStorageSync("wechat_login_tag","true");var e=this.appid,t=encodeURIComponent(window.location.origin+"/#/pages/index/index");if("dev"==this.base_config.environment)var i="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(e,"&redirect_uri=").concat(t,"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect");else i="https://"+this.d_domain+"/connect/oauth2/authorize?appid=".concat(e,"&redirect_uri=").concat(t,"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect");window.location.href=i}}};t.default=n},"9f12":function(e,t,i){"use strict";var n=i("4dc1"),a=i.n(n);a.a},b069:function(e,t,i){"use strict";i.r(t);var n=i("9742"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},ccc7:function(e,t,i){"use strict";i.r(t);var n=i("4cbe"),a=i("b069");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("9f12");var d=i("828b"),r=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,"14b5f881",null,!1,n["a"],void 0);t["default"]=r.exports}}]);